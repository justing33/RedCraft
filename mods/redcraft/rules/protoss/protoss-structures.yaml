##################################
# PROTOSS CONSTRUCTION BUILDINGS #
##################################

NEXUS-CONSTRUCTION-BLDG:
    Inherits: ^Building
    #Inherits@AUTOTARGET: ^AutoTargetGround
    Selectable:
        Bounds: 3072, 2048
    ProvidesRadar:
    Buildable:
        Queue: Building
        BuildDuration: 1
        Prerequisites: ~probe
    CaptureManager:
        PreventsAutoTarget: true
    Capturable:
        Types: building
    Building:
        Footprint: XXX xxx XXX
        Dimensions: 3,3
        LocalCenterOffset: 0,-512,0
    # TODO: Provides 15 initial supply
    Health:
        HP: 1500
    Armor:
        Type: Steel
    Tooltip:
        # TODO:
        Name: NEXUS
    RevealsShroud:
        Range: 11c0
        RevealGeneratedShroud: true
    BaseBuilding:
    RenderSprites:
    HitShape:
        Type: Rectangle
            TopLeft: -1536, -598
            BottomRight: 1536, 598
    HitShape@TOPANDBOTTOM:
        TargetableOffsets: 811,0,0, -811,0,0
        Type: Rectangle
            TopLeft: -555, -1110
            BottomRight: 555, 1110
    MustBeDestroyed:
        RequiredForShortGame: true
    TransformOnCapture:
        IntoActor: nexus
        # Start at low health to then "heal" as construction occurs
        ForceHealthPercentage: 1
        SkipMakeAnims: false

############################
#### PROTOSS STRUCTURES ####
############################

NEXUS:
    Inherits: ^Building
    # TODO: Overcharge?
    #Inherits@AUTOTARGET: ^AutoTargetGround
    Selectable:
        Bounds: 3072, 2048
    ProvidesRadar:
    Building:
        Footprint: XXX xxx XXX
        Dimensions: 3,3
        LocalCenterOffset: 0,-512,0
    # TODO: Provides 15 initial supply
    WithMakeAnimation:
        Condition: under-construction
    ChangesHealth:
        Step: 0
        PercentageStep: 1
        Delay: 19
        StartIfBelow: 100
        RequiresCondition: under-construction
    Health:
        HP: 2000
        # TODO: Shields
        # 1000 Shields
        # 1000 HP
    Armor:
        Type: Steel
    Tooltip:
        Name: NEXUS TBD
    Refinery:
        UseStorage: False
    # Left Side Docks
    DockHost@LEFTCENTER:
        Type: Unload
        DockWait: 0
        DockAngle: 256
        DockOffset: -2c1, 0, 0
        MaxQueueLength: 1
        RequiresCondition: !under-construction
    DockHost@LEFTCENTERANDUP1:
        Type: Unload
        DockAngle: 256
        DockOffset: -2c1, -1c1, 0
        MaxQueueLength: 1
        RequiresCondition: !under-construction
    DockHost@LEFTCENTERANDUP2:
        Type: Unload
        DockAngle: 256
        DockOffset: -1c1, -2c1, 0
        MaxQueueLength: 1
        RequiresCondition: !under-construction
    DockHost@LEFTCENTERANDDOWN1:
        Type: Unload
        DockAngle: 256
        DockOffset: -2c1, 1c1, 0
        MaxQueueLength: 1
        RequiresCondition: !under-construction
    DockHost@LEFTCENTERANDDOWN2:
        Type: Unload
        DockAngle: 256
        DockOffset: -1c1, 2c1, 0
        MaxQueueLength: 1
        RequiresCondition: !under-construction
        # Right Side Docks
    DockHost@RIGHTCENTER:
        Type: Unload
        DockWait: 0
        DockAngle: 256
        DockOffset: 2c1, 0, 0
        MaxQueueLength: 1
        RequiresCondition: !under-construction
    DockHost@RIGHTCENTERANDUP1:
        Type: Unload
        DockAngle: 256
        DockOffset: 2c1, -1c1, 0
        MaxQueueLength: 1
        RequiresCondition: !under-construction
    DockHost@RIGHTCENTERANDUP2:
        Type: Unload
        DockAngle: 256
        DockOffset: 1c1, -2c1, 0
        MaxQueueLength: 1
        RequiresCondition: !under-construction
    DockHost@RIGHTCENTERANDDOWN1:
        Type: Unload
        DockAngle: 256
        DockOffset: 2c1, 1c1, 0
        MaxQueueLength: 1
        RequiresCondition: !under-construction
    DockHost@RIGHTCENTERANDDOWN2:
        Type: Unload
        DockAngle: 256
        DockOffset: 1c1, 2c1, 0
        MaxQueueLength: 1
        RequiresCondition: !under-construction
    StoresResources:
        Capacity: 2000
    Armor:
        Type: Wood
    RevealsShroud:
        Range: 11c0
        RevealGeneratedShroud: true
    RevealsShroud@GAPGEN:
        Range: 11c0
    Production@Probe:
        Produces: Ship
        PauseOnCondition: under-construction
    ProductionQueue@Probe:
        Type: Ship
        PayUpFront: true
        Factions: protoss
    GrantExternalConditionToProduced:
        Condition: produced
    RallyPoint:
        ForceSetType: Ship
    BaseBuilding:
    Exit@1:
        ExitCell: 0,0
        ProductionTypes: Ship
    # TODO: This is important for some reason regarding building the upgrades
    ProvidesPrerequisite@nexus:
        Factions: protoss
        Prerequisite: nexus
        RequiresCondition: !under-construction
    ProvidesPrerequisite@protoss-workers:
        Factions: protoss
        Prerequisite: protoss.workers
    RenderSprites:
    HitShape:
        Type: Rectangle
            TopLeft: -1536, -598
            BottomRight: 1536, 598
    HitShape@TOPANDBOTTOM:
        TargetableOffsets: 811,0,0, -811,0,0
        Type: Rectangle
            TopLeft: -555, -1110
            BottomRight: 555, 1110
    MustBeDestroyed:
        RequiredForShortGame: true
