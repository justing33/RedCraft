# Custom SCV Unit (based off HARV)
SCV:
    Inherits: ^Infantry
    Inherits@selection: ^SelectableEconomicUnit
    Buildable:
        Queue: Ship
        BuildPaletteOrder: 10
        BuildDuration: 900
        Prerequisites: comc
        Description: TBD
    Valued:
        Cost: 50
        # Supply: 1
        # Oil: 0
    Tooltip:
        Name: SCV
    Selectable:
        DecorationBounds: 800, 1000, 0, -300
    Harvester:
        Type: Unload
        # TODO: Remove ore
        Resources: Gems
        BaleLoadDelay: 10
        BaleUnloadDelay: 0
        BaleUnloadAmount: 99
        SearchForDeliveryBuildingDelay: 0
        # TODO: Radius stuff..
        SearchFromProcRadius: 200
        SearchFromHarvesterRadius: 100
        WaitDuration: 0
        FullyLoadedSpeed: 100
        HarvestFacings: 8
        EmptyCondition: no-ore
    StoresResources:
        Capacity: 1
        Resources: Gems
    DockClientManager:
        SearchForDockDelay: 1
    Health:
        HP: 45
    Armor:
        Type: Heavy
    Mobile:
        Speed: 98
    RevealsShroud:
        Range: 8c0
    GpsDot:
        String: Harvester
    Armament@PRIMARY:
        Weapon: SCVFusionCutter
        LocalOffset: 427,0,341
    Armament@REPAIRBUILDINGS:
        Weapon: SCVBuildingHeal
        Cursor: heal
        OutsideRangeCursor: heal
        TargetRelationships: Ally
        ForceTargetRelationships: None
    AttackFrontal:
        FacingTolerance: 0
    AttackMove:
    # PRODUCTION #
    Production@BUILDINGS:
        Produces: Building, Defense
    ProductionQueue@BUILDINGS:
        Type: Building
        QueueLimit: 1
        ItemLimit: 1
    GrantExternalConditionToProduced:
        Condition: produced
    ProvidesPrerequisite@SCV:
        Prerequisite: scv
    #SpawnActorOnDeath:
    #    Actor: HARV.EmptyHusk
    #Explodes:
    #    RequiresCondition: !no-ore
    #    Weapon: OreExplosion
    WithStoresResourcesPipsDecoration:
        Position: BottomLeft
        Margin: 4, 3
        RequiresSelection: true
        PipCount: 7
        ResourceSequences:
            Gems: pip-blue
    # TODO: Allow to be loaded into lifted off Command Center
    Passenger:
        CargoType: Vehicle
        Weight: 1
    Targetable:
        TargetTypes: GroundActor, Vehicle, Defense, Structure

# Light Tank
# Hellion
HELLION:
    Inherits: ^Vehicle
    AutoTarget:
    AutoTargetPriority@ATTACKGROUNDUNITSFIRST:
        Priority: 2
        ValidTargets: Infantry, Vehicle, Building
        InvalidTargets: NoAutoTarget
    AutoTargetPriority@ATTACKBUILDINGSSECOND:
        Priority: 1
        ValidTargets: Structure
        InvalidTargets: NoAutoTarget
    Buildable:
        Queue: Vehicle
        BuildDuration: 525
        BuildPaletteOrder: 10
        Prerequisites: factory
        Description: TBD
    Valued:
        Cost: 100
        # Supply: 2
        # Oil: 0
    Tooltip:
        Name: Hellion
    UpdatesPlayerStatistics:
        AddToArmyValue: true
    Health:
        HP: 90
    Armor:
        Type: Light
        # Armor: Light, Mechanical
    Mobile:
        TurnSpeed: 40
        Speed: 148
        PauseOnCondition: notmobile || being-captured
    RevealsShroud:
        Range: 10c0
        RevealGeneratedShroud: False
    RevealsShroud@GAPGEN:
        Range: 4c0
    Turreted:
        TurnSpeed: 40
        Offset: 0,0,128
    Armament:
        Weapon: HellionFlamethrower
        LocalOffset: 192,0,176
        FireDelay: 2
    Selectable:
        DecorationBounds: 1194, 1194
    Transforms:
        IntoActor: hellbat
        Offset: 0,0
        TransformSounds: placbldg.aud, build5.aud
        NoTransformNotification: BuildingCannotPlaceAudio
        NoTransformTextNotification: Cannot deploy here.
    Passenger:
        Weight: 2
    AttackTurreted:
    WithMuzzleOverlay:
    WithSpriteTurret:


# Artillery
# Hellbat
HELLBAT:
    Inherits: ^Vehicle
    AutoTarget:
    AutoTargetPriority@ATTACKGROUNDUNITSFIRST:
        Priority: 2
        ValidTargets: Infantry, Vehicle, Building
        InvalidTargets: NoAutoTarget
    AutoTargetPriority@ATTACKBUILDINGSSECOND:
        Priority: 1
        ValidTargets: Structure
        InvalidTargets: NoAutoTarget
    Valued:
        Cost: 100
        # Supply: 2
    Tooltip:
        Name: Hellbat
    UpdatesPlayerStatistics:
        AddToArmyValue: true
    Health:
        HP: 135
    Armor:
        Type: Light
    Mobile:
        Speed: 78
    RevealsShroud:
        Range: 10c0
        RevealGeneratedShroud: False
    RevealsShroud@GAPGEN:
        Range: 4c0
    Armament:
        Weapon: HellbatFlamethrower
        LocalOffset: 192,0,176
        FireDelay: 2
    AttackFrontal:
        TargetFrozenActors: True
        ForceFireIgnoresActors: True
        FacingTolerance: 0
    WithMuzzleOverlay:
    Transforms:
        IntoActor: hellion
        Offset: 0,0
        TransformSounds: placbldg.aud, build5.aud
    Passenger:
        Weight: 4

# Heavy Tank
# Siege Tank
SIEGETANK:
    Inherits: ^TrackedVehicle
    AutoTarget:
    AutoTargetPriority@ATTACKGROUNDUNITSFIRST:
        Priority: 2
        ValidTargets: Infantry, Vehicle, Building
        InvalidTargets: NoAutoTarget
    AutoTargetPriority@ATTACKBUILDINGSSECOND:
        Priority: 1
        ValidTargets: Structure
        InvalidTargets: NoAutoTarget
    Buildable:
        Queue: Vehicle
        BuildDuration: 800
        BuildPaletteOrder: 20
        Prerequisites: factory
        Description: TBD
    Valued:
        Cost: 150
        # Supply: 3
        # Oil: 125
    Tooltip:
        Name: Siege Tank
        GenericName: Siege Tank
    UpdatesPlayerStatistics:
        AddToArmyValue: true
    Health:
        HP: 175
    Armor:
        Type: Heavy
    Mobile:
        Speed: 78
    RevealsShroud:
        Range: 11c0
        RevealGeneratedShroud: False
    RevealsShroud@GAPGEN:
        Range: 4c0
    AttackTurreted:
    WithMuzzleOverlay:
    WithSpriteTurret:
    Turreted:
        TurnSpeed: 100
    Armament:
        Weapon: SiegeTank90mmCannon
        Recoil: 128
        RecoilRecovery: 38
        LocalOffset: 768,85,90, 768,-85,90
        MuzzleSequence: muzzle
    GrantConditionOnPrerequisite:
        Condition: siege-mode-researched
        Prerequisites: can-siege
    Transforms:
        RequiresCondition: siege-mode-researched
        IntoActor: siegetank-sm
        DeployBlockedCursor: deploy-blocked
    Passenger:
        Weight: 4
    Selectable:
        DecorationBounds: 1194, 1194

# Mammoth Tank
# Sieged Tank Siege Mode
SIEGETANK-SM:
    Inherits: ^Building
    Inherits@shape: ^1x1Shape
    # Allows siege tanks to auto attack other siege tanks!
    AutoTarget:
    AutoTargetPriority@ATTACKGROUNDUNITSFIRST:
        Priority: 2
        ValidTargets: Infantry, Vehicle, Building
        InvalidTargets: NoAutoTarget
    AutoTargetPriority@ATTACKBUILDINGSSECOND:
        Priority: 1
        ValidTargets: Structure
        InvalidTargets: NoAutoTarget
    Selectable:
        DecorationBounds: 1194, 1194
    # Supply: 3
    Tooltip:
        Name: Siege Tank (Sieged)
        GenericName: Siege Tank (Sieged)
    UpdatesPlayerStatistics:
        AddToArmyValue: true
    Health:
        HP: 175
    Armor:
        Type: Heavy
    Immobile:
        OccupiesSpace: true
    RevealsShroud:
        Range: 11c0
        RevealGeneratedShroud: False
    RevealsShroud@GAPGEN:
        Range: 4c0
    AttackTurreted:
    WithMuzzleOverlay:
    WithSpriteTurret:
    Turreted:
        TurnSpeed: 100
    Armament:
        Weapon: SiegeTankCrucioShockCannon
        Recoil: 171
        RecoilRecovery: 30
        LocalOffset: 768,85,90, 768,-85,90
        MuzzleSequence: muzzle
    RenderRangeCircle:
        RangeCircleType: siege-radius
    Transforms:
        IntoActor: siegetank

# Mine Layer
# Widow Mine
WIDOWMINE:
    Inherits: ^Vehicle
    AutoTarget:
    AutoTargetPriority@ATTACKGROUNDUNITSFIRST:
        Priority: 2
        ValidTargets: Infantry, Vehicle, Building
        InvalidTargets: NoAutoTarget
    AutoTargetPriority@ATTACKBUILDINGSSECOND:
        Priority: 1
        ValidTargets: Structure
        InvalidTargets: NoAutoTarget
    # TODO: Look into selectable priorities later for QOL
    # Inherits@selection: ^SelectableSupportUnit
    Buildable:
        Queue: Vehicle
        BuildDuration: 525
        BuildPaletteOrder: 40
        Prerequisites: factory
        Description: TBD
    Valued:
        Cost: 75
        # Supply: 2
        # Oil: 25
    Tooltip:
        Name: Widow Mine
    UpdatesPlayerStatistics:
        AddToArmyValue: true
    Health:
        HP: 90
    Armor:
        Type: Heavy
    Mobile:
        Speed: 98
    Turreted:
        TurnSpeed: 300
        Offset: -298,0,298
    Armament:
        Weapon: WidowMineSentinelMissile
        LocalOffset: 624,-200,0
        MuzzleSequence: muzzle
    AttackTurreted:
    WithMuzzleOverlay:
    Cloak:
        InitialDelay: 50
        CloakDelay: 100
        CloakSound: appear1.aud
        UncloakSound: appear1.aud
        IsPlayerPalette: true
        UncloakOn: Move
        PauseOnCondition: cloak-force-disabled
    # TODO: Look into disabling cloak on Critical
    # GrantConditionOnDamageState@UNCLOAK:
    #     Condition: cloak-force-disabled
    #     ValidDamageStates: Critical
    RevealsShroud:
        Range: 7c0
        RevealGeneratedShroud: False
    RevealsShroud@GAPGEN:
        Range: 4c0
    Targetable:
        TargetTypes: Ground, Infantry, Vehicle, Air, AirborneActor
    Passenger:
        Weight: 2

# Chrono Tank
# Viking Assault Mode (Landed Viking)
VIKING-AM:
    Inherits: ^Vehicle
    AutoTarget:
    AutoTargetPriority@ATTACKGROUNDUNITSFIRST:
        Priority: 2
        ValidTargets: Infantry, Vehicle, Building
        InvalidTargets: NoAutoTarget
    AutoTargetPriority@ATTACKBUILDINGSSECOND:
        Priority: 1
        ValidTargets: Structure
        InvalidTargets: NoAutoTarget
    # Valued:
    # Cost: 150
    # Supply: 2 <----
    Tooltip:
        Name: Viking (Landed)
        GenericName: Viking (Landed)
    UpdatesPlayerStatistics:
        AddToArmyValue: true
    Health:
        HP: 135
    Armor:
        Type: Light
        # Armor: Armored, Mechanical
    Mobile:
        Speed: 78
        Locomotor: heavywheeled
    RevealsShroud:
        Range: 10c0
        RevealGeneratedShroud: False
    RevealsShroud@GAPGEN:
        Range: 4c0
    Armament@PRIMARY:
        Weapon: VIKING-AM-GATLING
        MuzzleSequence: muzzle
        LocalOffset: 128,0,43
    WithMuzzleOverlay:
    AttackFrontal:
        FacingTolerance: 0
    Selectable:
        DecorationBounds: 1280, 1280
    Transforms:
        IntoActor: viking
    Passenger:
        Weight: 2

# Mobile Flak
# Cyclone
CYCLONE:
    Inherits: ^Vehicle
    AutoTarget:
    AutoTargetPriority@ATTACKGROUNDUNITSFIRST:
        Priority: 2
        ValidTargets: Infantry, Vehicle, Building, AirborneActor
        InvalidTargets: NoAutoTarget
    AutoTargetPriority@ATTACKBUILDINGSSECOND:
        Priority: 1
        ValidTargets: Structure
        InvalidTargets: NoAutoTarget
    Buildable:
        Queue: Vehicle
        BuildDuration: 800
        BuildPaletteOrder: 30
        Prerequisites: factory
        Description: TBD
    Valued:
        Cost: 125
        # Oil: 50
        # Supply: 2
    Tooltip:
        Name: Cyclone
    UpdatesPlayerStatistics:
        AddToArmyValue: true
    Health:
        HP: 130
    Armor:
        Type: Light
        # Armor: Armored, Mechanical
    Mobile:
        TurnSpeed: 40
        Speed: 98
    RevealsShroud:
        Range: 11c0
        RevealGeneratedShroud: False
    RevealsShroud@GAPGEN:
        Range: 4c0
    Turreted:
        TurnSpeed: 40
        Offset: -298,0,298
    Armament@AA:
        Weapon: CycloneMissileAA
        Recoil: 85
        LocalOffset: 512,0,192
        MuzzleSequence: muzzle
    Armament@AG:
        Weapon: CycloneMissileAG
        Recoil: 85
        LocalOffset: 512,0,192
        MuzzleSequence: muzzle
    AttackTurreted:
    WithMuzzleOverlay:
    WithSpriteTurret:
    Selectable:
        DecorationBounds: 1194, 1194
    Passenger:
        Weight: 4

#######################
# NON BUILDABLE UNITS #
#######################

# MCV
MCV:
    -Buildable:

# Ore Truck
HARV:
    -Buildable:

# Jeep is replaced by the light tank
JEEP:
    -Buildable:

# Light Tank
1TNK:
    -Buildable:

# Medium tank
2TNK:
    -Buildable:

# Heavy Tank
3TNK:
    -Buildable:

# Mammoth Tank
4TNK:
    -Buildable:

# Artillery
ARTY:
    -Buildable:

# Mine Layer
MNLY:
    -Buildable:

# Chrono Tank
CTNK:
    -Buildable:

# Mobile Flak
FTRK:
    -Buildable:

# Phase Transport
STNK:
    -Buildable:

# V2 Rocket
V2RL:
    -Buildable:

# APC
APC:
    -Buildable:

# Supply Truck
TRUK:
    -Buildable:

# Mobile Gap Generator
MGG:
    -Buildable:

# Mobile Radar Jammer
MRJ:
    -Buildable:

# Tesla Tank
TTNK:
    -Buildable:

# Demolition Truck
DTRK:
    -Buildable:

# Mad Tank
QTNK:
    -Buildable:
